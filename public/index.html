<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/styles.css" />
  <title>LoboCaf ‚Äì Admin Panel</title>
</head>
<body>
  <!-- Vista de autenticaci√≥n -->
  <main class="auth-shell">
    <section id="auth" class="login-slab">
      <!-- Columna izquierda: formulario -->
      <div class="login-left">
        <div class="login-header">
          <p class="hello">Hello!</p>
          <h1 class="login-title">Sign into your account</h1>
          <p class="login-subtitle">Use your LoboCaf admin credentials.</p>
        </div>

        <div class="field-pill">
          <label class="sr-only" for="email">E-mail</label>
          <input id="email"
                 type="email"
                 class="input"
                 placeholder="E-mail"
                 autocomplete="email"
                 required />
        </div>

        <div class="field-pill field-pill--password">
          <label class="sr-only" for="password">Password</label>
          <input id="password"
                 type="password"
                 class="input"
                 placeholder="Password"
                 autocomplete="current-password"
                 required />
          <button type="button"
                  id="togglePwd"
                  class="pwd-toggle"
                  aria-pressed="false"
                  aria-label="Show password">üëÅ</button>
        </div>

        <button id="loginBtn" class="btn-primary" aria-live="polite">
          Sign in
        </button>

        <p id="authStatus" class="status" role="status" aria-live="polite"></p>
      </div>

      <!-- Columna derecha: panel de bienvenida -->
      <aside class="login-right">
        <div class="welcome-box">
          <h2 class="welcome-title">Welcome Back!</h2>
          <p class="welcome-text">
            Administra los productos de LoboCaf de forma segura desde este panel.
          </p>
        </div>
      </aside>
    </section>
  </main>

  <!-- App (se muestra solo si hay sesi√≥n) -->
  <section id="app" style="display:none">
    <div class="dash">
      <!-- M√©tricas -->
      <div class="cards">
        <div class="card kpi kpi-1">
          <div class="kpi-title">Total de productos</div>
          <div class="kpi-value" id="statsTotal">0</div>
          <div class="kpi-foot">Actualizado ahora</div>
        </div>
        <div class="card kpi kpi-2">
          <div class="kpi-title">Precio promedio</div>
          <div class="kpi-value" id="statsAvg">$0.00</div>
          <div class="kpi-foot">Promedio simple</div>
        </div>
        <div class="card kpi kpi-3">
          <div class="kpi-title">Producto m√°s caro</div>
          <div class="kpi-value" id="statsMax">$0.00</div>
          <div class="kpi-foot" id="statsMaxName">‚Äî</div>
        </div>
      </div>

      <!-- Form -->
      <div class="card form-card">
        <h2 class="section-title">Agregar producto</h2>
        <form id="addForm" class="form-grid">
          <div class="field">
            <label for="name">Nombre</label>
            <input id="name" class="input" placeholder="Capuchino" required />
          </div>
          <div class="field">
            <label for="price">Precio</label>
            <input id="price" class="input" type="number" step="0.01" placeholder="35.00" required />
          </div>
          <div class="actions">
            <button class="btn primary">Agregar</button>
          </div>
        </form>
      </div>

      <!-- Tabla -->
      <div class="card table-card">
        <h2 class="section-title">Productos</h2>
        <div id="emptyState" class="empty">A√∫n no hay productos. Agrega el primero.</div>
        <div class="table-scroll">
          <table class="table" id="productsTable">
            <thead>
              <tr>
                <th>Nombre</th>
                <th class="right">Precio</th>
              </tr>
            </thead>
            <tbody id="productsTableBody"></tbody>
          </table>
        </div>
        <div class="card-foot">
          <button id="logoutBtn" class="btn ghost">Cerrar sesi√≥n</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Firebase Web SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBwFKd3LFrO30e4RguksmnnGjviX2Ynur4",
      authDomain: "lobocaf-e3f49.firebaseapp.com",
      projectId: "lobocaf-e3f49",
      storageBucket: "lobocaf-e3f49.firebasestorage.app",
      messagingSenderId: "915235060785",
      appId: "1:915235060785:web:64f688de67911e030d2910",
      measurementId: "G-XFXH23TBD4"
    };
    firebase.initializeApp(firebaseConfig);
  </script>
  <script src="/app.js"></script>
</body>
</html>
