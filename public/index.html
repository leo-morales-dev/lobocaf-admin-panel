<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/styles.css" />
  <title>LoboCaf ‚Äì Admin Panel</title>
</head>
<body>
  <!-- Vista de autenticaci√≥n -->
  <main class="auth-shell">
    <section id="auth" class="auth-card">
      <aside class="auth-info">
        <div class="auth-info__content">
          <span class="auth-badge">CRM LoboCaf</span>
          <h1 class="auth-headline">Administra tu cat√°logo como un CRM</h1>
          <p class="auth-copy">
            Gestiona precios, inventario y desempe√±o desde un panel dise√±ado para equipos.
          </p>
          <ul class="auth-list">
            <li>Sincronizaci√≥n segura con Firebase.</li>
            <li>Monitoreo de m√©tricas clave en tiempo real.</li>
            <li>Experiencia pensada para la operaci√≥n diaria.</li>
          </ul>
        </div>
      </aside>

      <div class="auth-form">
        <div class="auth-brand">
          <div class="brand-icon">‚òï</div>
          <div class="brand-text">
            <span class="brand-name">LoboCaf</span>
            <span class="brand-tag">Administrador</span>
          </div>
        </div>

        <div class="auth-form__header">
          <h2>Inicia sesi√≥n</h2>
          <p>Accede con tus credenciales corporativas.</p>
        </div>

        <div class="field-pill">
          <label class="sr-only" for="email">E-mail</label>
          <input id="email"
                 type="email"
                 class="input"
                 placeholder="correo@lobocaf.com"
                 autocomplete="email"
                 required />
        </div>

        <div class="field-pill field-pill--password">
          <label class="sr-only" for="password">Password</label>
          <input id="password"
                 type="password"
                 class="input"
                 placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                 autocomplete="current-password"
                 required />
          <button type="button"
                  id="togglePwd"
                  class="pwd-toggle"
                  aria-pressed="false"
                  aria-label="Mostrar contrase√±a">üëÅ</button>
        </div>

        <button id="loginBtn" class="btn-primary" aria-live="polite">
          Iniciar sesi√≥n
        </button>

        <p id="authStatus" class="status" role="status" aria-live="polite"></p>
      </div>
    </section>
  </main>

  <!-- App (se muestra solo si hay sesi√≥n) -->
  <section id="app" class="crm-shell" style="display:none">
    <div class="crm-layout">
      <aside class="crm-sidebar">
        <div>
          <div class="sidebar-brand">
            <span class="brand-icon brand-icon--sidebar">‚òï</span>
            <div>
              <span class="brand-name">LoboCaf</span>
              <span class="brand-tag">CRM Operativo</span>
            </div>
          </div>

          <nav class="sidebar-nav">
            <p class="nav-label">Panel</p>
            <a href="#" class="nav-link nav-link--active">Productos</a>
            <a href="#" class="nav-link">Reportes</a>
            <a href="#" class="nav-link">Clientes</a>
            <a href="#" class="nav-link">Equipos</a>
          </nav>
        </div>

        <div class="sidebar-foot">
          <div class="sidebar-user">
            <div class="avatar">LC</div>
            <div>
              <span class="user-name">Administrador</span>
              <span class="user-role">Operaciones</span>
            </div>
          </div>
          <button id="logoutBtn" class="btn btn-logout">Cerrar sesi√≥n</button>
        </div>
      </aside>

      <div class="crm-main">
        <header class="crm-header">
          <div>
            <h1 class="crm-title">Cat√°logo de productos</h1>
            <p class="crm-subtitle">Controla precios y disponibilidad desde una vista CRM.</p>
          </div>
          <div class="header-actions">
            <div class="session-indicator">
              <span class="session-dot"></span>
              Sesi√≥n activa
            </div>
          </div>
        </header>

        <div class="crm-toolbar">
          <div class="toolbar-search">
            <label class="sr-only" for="searchProducts">Buscar productos</label>
            <span class="toolbar-icon">üîç</span>
            <input id="searchProducts" class="toolbar-input" placeholder="Buscar por nombre" />
          </div>
          <div class="toolbar-filters" role="group" aria-label="Filtrar productos">
            <button class="filter-btn filter-btn--active" data-filter="all">Todos</button>
            <button class="filter-btn" data-filter="premium">Premium</button>
            <button class="filter-btn" data-filter="media">Ticket medio</button>
            <button class="filter-btn" data-filter="basico">B√°sicos</button>
          </div>
        </div>

        <div class="crm-content">
          <section class="crm-metrics">
            <article class="metric-card metric-card--total">
              <div class="metric-icon">üì¶</div>
              <div>
                <h2 class="metric-title">Total de productos</h2>
                <p class="metric-value" id="statsTotal">0</p>
                <p class="metric-foot">Actualizado ahora</p>
              </div>
            </article>

            <article class="metric-card metric-card--avg">
              <div class="metric-icon">üí∞</div>
              <div>
                <h2 class="metric-title">Ticket promedio</h2>
                <p class="metric-value" id="statsAvg">$0.00</p>
                <p class="metric-foot">Promedio simple</p>
              </div>
            </article>

            <article class="metric-card metric-card--max">
              <div class="metric-icon">‚≠ê</div>
              <div>
                <h2 class="metric-title">Producto destacado</h2>
                <p class="metric-value" id="statsMax">$0.00</p>
                <p class="metric-foot" id="statsMaxName">‚Äî</p>
              </div>
            </article>

            <article class="metric-card metric-card--premium">
              <div class="metric-icon">üéØ</div>
              <div>
                <h2 class="metric-title">Premium</h2>
                <p class="metric-value" id="statsPremium">0</p>
                <p class="metric-foot">Precio ‚â• $60 MXN</p>
              </div>
            </article>
          </section>

          <div class="crm-grid">
            <section class="crm-panel">
              <div class="panel-header">
                <div>
                  <h2>Agregar producto</h2>
                  <p>Registra un nuevo elemento en el cat√°logo.</p>
                </div>
                <div class="panel-badge">Nuevo</div>
              </div>
              <form id="addForm" class="panel-form">
                <div class="form-field">
                  <label for="name">Nombre</label>
                  <input id="name" class="input" placeholder="Capuchino" required />
                </div>
                <div class="form-field">
                  <label for="price">Precio</label>
                  <div class="input-composite">
                    <span class="input-prefix">$</span>
                    <input id="price" class="input" type="number" step="0.01" placeholder="35.00" required />
                  </div>
                  <p class="field-hint">Def√≠nelo en MXN. Se clasificar√° autom√°ticamente.</p>
                </div>
                <div class="form-actions">
                  <button class="btn btn-primary">Agregar a CRM</button>
                </div>
              </form>
            </section>

            <section class="crm-panel crm-panel--table">
              <div class="panel-header">
                <div>
                  <h2>Productos</h2>
                  <p>Visualiza el listado actualizado.</p>
                </div>
              </div>
              <div id="emptyState" class="empty-state">A√∫n no hay productos. Agrega el primero.</div>
              <div class="table-wrapper">
                <table class="crm-table" id="productsTable">
                  <thead>
                    <tr>
                      <th>Nombre</th>
                      <th>Segmento</th>
                      <th class="right">Precio</th>
                      <th class="right">Acciones</th>
                    </tr>
                  </thead>
                  <tbody id="productsTableBody"></tbody>
                </table>
              </div>
            </section>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Firebase Web SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBwFKd3LFrO30e4RguksmnnGjviX2Ynur4",
      authDomain: "lobocaf-e3f49.firebaseapp.com",
      projectId: "lobocaf-e3f49",
      storageBucket: "lobocaf-e3f49.firebasestorage.app",
      messagingSenderId: "915235060785",
      appId: "1:915235060785:web:64f688de67911e030d2910",
      measurementId: "G-XFXH23TBD4"
    };
    firebase.initializeApp(firebaseConfig);
  </script>
  <script src="/app.js"></script>
</body>
</html>
