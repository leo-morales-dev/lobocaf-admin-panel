<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/styles.css" />
  <title>LoboCaf ‚Äì Admin Panel</title>
</head>
<body>
  <main class="auth-wrapper">
    <section id="auth" class="login-card">
      <div class="login-card__form">
        <div class="login-card__heading">
          <span class="eyebrow">Hola de nuevo</span>
          <h1 class="login-title">Inicia sesi√≥n</h1>
          <p class="login-subtitle">Accede con el correo y contrase√±a que tienes registrados en Firebase.</p>
        </div>

        <label for="email" class="sr-only">Correo</label>
        <div class="field-with-icon">
          <span class="icon" aria-hidden="true">üìß</span>
          <input id="email" type="email" class="input" placeholder="correo@ejemplo.com"
                autocomplete="email" required />
        </div>

        <label for="password" class="sr-only">Contrase√±a</label>
        <div class="field-with-icon">
          <span class="icon" aria-hidden="true">üîí</span>
          <input id="password" type="password" class="input" placeholder="Contrase√±a"
                autocomplete="current-password" required />
          <button type="button" id="togglePwd" class="btn-ghost"
                  aria-pressed="false" aria-label="Mostrar contrase√±a">üëÅ</button>
        </div>

        <button id="loginBtn" class="btn btn--main" aria-live="polite">Iniciar sesi√≥n</button>
        <p id="authStatus" class="status" role="status" aria-live="polite"></p>
      </div>

      <aside class="login-card__aside">
        <div class="welcome-block">
          <h2 class="welcome-title">¬°Bienvenido!</h2>
          <p class="welcome-text">Mant√©n actualizado el cat√°logo de LoboCaf en cuesti√≥n de segundos y controla todos tus productos desde un mismo lugar.</p>
        </div>
      </aside>
    </section>
  </main>


  <section id="app" style="display:none">
    <div class="dash">
      <!-- M√©tricas -->
      <div class="cards">
        <div class="card kpi kpi-1">
          <div class="kpi-title">Total de productos</div>
          <div class="kpi-value" id="statsTotal">0</div>
          <div class="kpi-foot">Actualizado ahora</div>
        </div>
        <div class="card kpi kpi-2">
          <div class="kpi-title">Precio promedio</div>
          <div class="kpi-value" id="statsAvg">$0.00</div>
          <div class="kpi-foot">Promedio simple</div>
        </div>
        <div class="card kpi kpi-3">
          <div class="kpi-title">Producto m√°s caro</div>
          <div class="kpi-value" id="statsMax">$0.00</div>
          <div class="kpi-foot" id="statsMaxName">‚Äî</div>
        </div>
      </div>

      <!-- Acciones -->
      <div class="card form-card">
        <h2 class="section-title">Agregar producto</h2>
        <form id="addForm" class="form-grid">
          <div class="field">
            <label for="name">Nombre</label>
            <input id="name" class="input" placeholder="Capuchino" required />
          </div>
          <div class="field">
            <label for="price">Precio</label>
            <input id="price" class="input" type="number" step="0.01" placeholder="35.00" required />
          </div>
          <div class="actions">
            <button class="btn primary">Agregar</button>
          </div>
        </form>
      </div>

      <!-- Tabla -->
      <div class="card table-card">
        <h2 class="section-title">Productos</h2>
        <div id="emptyState" class="empty">A√∫n no hay productos. Agrega el primero con el formulario superior.</div>
        <div class="table-scroll">
          <table class="table" id="productsTable">
            <thead>
              <tr>
                <th>Nombre</th>
                <th class="right">Precio</th>
              </tr>
            </thead>
            <tbody id="productsTableBody"></tbody>
          </table>
        </div>
        <div class="card-foot">
          <button id="logoutBtn" class="btn ghost">Cerrar sesi√≥n</button>
        </div>
      </div>
    </div>
  </section>


  <!-- Firebase Web SDK (compat v9) para usar la API global `firebase.*` -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

  <script>
    // Tu configuraci√≥n real de Firebase (pegada desde la consola)
    const firebaseConfig = {
      apiKey: "AIzaSyBwFKd3LFrO30e4RguksmnnGjviX2Ynur4",
      authDomain: "lobocaf-e3f49.firebaseapp.com",
      projectId: "lobocaf-e3f49",
      storageBucket: "lobocaf-e3f49.firebasestorage.app",
      messagingSenderId: "915235060785",
      appId: "1:915235060785:web:64f688de67911e030d2910",
      measurementId: "G-XFXH23TBD4"
    };
    // Inicializa con el SDK compat (coincide con el front del starter)
    firebase.initializeApp(firebaseConfig);
  </script>

  <!-- L√≥gica del panel (login, fetch a /api/products, etc.) -->
  <script src="/app.js"></script>
</body>
</html>
